<html>
<body>

<p id="demo"></p>
<H1>XMLHttpRequest</H1>
<p class="parrafo"></p>
<button class="boton">presionar</button>


<script>
    //dentro de la constante boton metemos la dirrecion de 
    //nuestro parrafo de clase boton
    const boton= document.getElementsByClassName("boton");

    boton[0].addEventListener("click",mostrar)
    
    
    function mostrar(){
        let xhttp = new XMLHttpRequest();

        xhttp.open("GET","https://www.aemet.es/xml/municipios/localidad_46202.xml", true);
        xhttp.send();

        xhttp.onreadystatechange = function(){
            
            if(this.readyState == 4 && this.status == 200){
                myFunction(this);
            }
        };
        function myFunction(xml){
            let direccion, poblacion, xmlDoc;

            xmlDoc = xml.responseXML;
        }
    }
    const boton = document.getElementsByClassName("boton");


boton[0].addEventListener("click",mostrar)






/*
function mostrar(){


   let xhttp = new XMLHttpRequest();


   xhttp.open("GET", "https://www.aemet.es/xml/municipios/localidad_46202.xml", true);
   xhttp.send();



   xhttp.onreadystatechange = function() {

    if (this.readyState == 4 && this.status == 200) {
      myFunction(this);      
    }

    const boton = document.getElementsByClassName("boton");


boton[0].addEventListener("click",mostrar)

   }

}

*/


function mostrar(){


   let xhttp = new XMLHttpRequest();


   xhttp.open("GET", "https://www.aemet.es/xml/municipios/localidad_46202.xml", true);
   xhttp.send();



   xhttp.onreadystatechange = function() {

    if (this.readyState == 4 && this.status == 200) {
      myFunction(this);      
    }
};


}


function myFunction(xml){

   let etiqueta_poblacion, poblacion, xmlDoc;
   xmlDoc = xml.responseXML;
   etiqueta_poblacion = xmlDoc.getElementsByTagName("nombre");
   poblacion = etiqueta_poblacion[0].childNodes[0].nodeValue;

   document.getElementById("demo").innerHTML = poblacion;


}
</Script>

</body>
</html>